### 条件を指定してインストール出来るパッケージを検索 (以下はPHPの例)
yum list | grep php


### Webサーバ構築
# apache インストール
sudo yum install httpd

sudo service httpd status
sudo service httpd start
sudo service httpd stop

# apacheの自動起動
chkconfig httpd on 
chkconfig --list httpd # これでhttpdのランレベルチェック

# ファイアウォール
sudo service iptables stop
sudo chkconfig iptables off


# パーミッション変更(-Rでディレクトリ内も再起処理)
chmod -R 777 /var/www/html/storage


# PHP5.6
# epelとremiのリポジトリを追加 (CentOS6.5)
rpm -Uvh http://ftp.iij.ad.jp/pub/linux/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm
rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm

# インストール
yum install --enablerepo=remi --enablerepo=remi-php56 php php-opcache php-devel php-mbstring php-mcrypt php-mysqlnd php-phpunit-PHPUnit php-pecl-xdebug php-pecl-xhprof




### MySQL と MySQLサーバのインストール
# ダウンロード
wget http://dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpm

# yumリポジトリを追加する
yum install http://repo.mysql.com/mysql-community-release-el6-5.noarch.rpm

# yum リポジトリの確認
cat /etc/yum.repos.d/mysql-community.repo

# インストールする
sudo yum install mysql-community-server

# インストールされたか？
rpm -qa | grep mysql

# ステータス
sudo service mysqld status

# バージョン確認
mysql --version

# 起動する。
sudo service mysqld start

# 自動起動ON
chkconfig mysqld on 
chkconfig | grep mysqld # その確認


# インストール直後のランダムパスワード確認
sudo cat /var/log/mysqld.log

# mysql_secure_installation実行
cd /usr/bin
mysql_secure_installation

# 現在のrootユーザのパスワード => ブランク
Enter current password for root (enter for none):

# rootユーザのパスワード設定有無 => y
Set root password? [Y/n] y

# rootユーザの設定パスワード => 新しいrootユーザのパスワード
New password:

# 確認用 => 新しいrootユーザのパスワード
Re-enter new password:

# anonymousユーザの削除有無 => y
Remove anonymous users? [Y/n] y

# rootユーザにリモートログインを許可するか => y
Disallow root login remotely? [Y/n] y

# testデータベースの削除有無 => y (*存在しないらしい)
Remove test database and access to it? [Y/n] y

# privilegeテーブル(今設定した内容)の再読み込み => y
Reload privilege tables now? [Y/n] y




### NTP ステータス
service ntpd status






### 各種インストール

# webサーバ
sudo yum -y install httpd

# httpd 起動
sudo service httpd start

sudo chkconfig httpd on
sudo service iptables stop
sudo chkconfig iptables off





### docker 初回起動 ※タグはUser/Tagにする慣習があるらしい.
docker build -t kuniyasu/my-first-container /vagrant





### MacターミナルでSSH接続 ###

# キーのパーミッションを700に
sudo chmod 0700 ~/.ssh/kuniyasu.key

# 接続 (ポートとキーを指定)
ssh -p 10022 -i ~/.ssh/kuniyasu.key kuniyasu@sv810.xserver.jp

# シンボリックリンク
ln -s $HOME/kuniyasu.xsrv.jp/laravel/public $HOME/kuniyasu.xsrv.jp/public_html




### yum -y install で phpMyAdminインストールと設定変更手順（Apache2.4） ###
# LANから接続出来るように以下のファイルに追記
sudo vi /etc/httpd/conf.d/phpMyAdmin.conf

 <IfModule mod_authz_core.c>
     # Apache 2.4
     <RequireAny>
       Require ip 127.0.0.1
       Require ip 192.168. ←これ
       Require ip ::1
     </RequireAny>
   </IfModule>
